loadkeys trq

# gdisk /dev/sda
# Command: x ↵
# Expert command: z ↵
# About to wipe out GPT on /dev/sda. Proceed?: y ↵
# GPT data structures destroyed! You may now partition the disk using fdisk or other utilities.
# Blank out MBR?: y ↵

shred --verbose --random-source=/dev/urandom --iterations=3 /dev/sda

cfdisk /dev/sda #DOS
New-> Partition Size: 512M -> Primary -> Bootable
New-> Partition Size: xxxGB -> Primary

cryptsetup --cipher twofish-xts-plain64 --hash sha512 --key-size 256 luksFormat /dev/sda2
cryptsetup luksOpen /dev/sda2 luks

pvcreate /dev/mapper/luks
vgcreate vg0 /dev/mapper/luks
lvcreate --size 8G vg0 --name swap
lvcreate -l +100%FREE vg0 --name root

mkfs.ext4 /dev/mapper/vg0-root
mkswap /dev/mapper/vg0-swap

mount /dev/mapper/vg0-root /mnt
mkdir /mnt/boot
mount /dev/sda1 /mnt/boot

pacstrap -i /mnt base base-devel

genfstab -U -p /mnt >> /mnt/etc/fstab

arch-chroot /mnt

sed -i 's/#en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/g' /etc/locale.gen
locale-gen
echo LANG=en_US.UTF-8 > /etc/locale.conf
export LANG=en_US.UTF-8

ln -s /usr/share/zoneinfo/Europe/Istanbul /etc/localtime

hwclock --systohc --utc

echo arch > /etc/hostname

pacman -S grub-bios xorg-server xorg-xinit mesa xterm xorg-twm xorg-xclock xf86-video-intel xf86-video-nouveau xf86-video-vesa xf86-input-synaptics wpa_supplicant dialog xcursor-vanilla-dmz-aa

nano /etc/mkinitcpio.conf

# HOOKS= encrypt lvm2 resume ...filesystems

grub-install --recheck /dev/sda
grub-mkconfig --output /boot/grub/grub.cfg

nano /etc/default/grub
# GRUB_CMDLINE_LINUX="cryptdevice=/dev/sda2:luks root=/dev/mapper/vg-root resume=swap:/dev/mapper/vg-swap"

mkinitcpio -p linux

passwd

nano /usr/share/X11/xorg.conf.d/10-evdev.conf
# Option "XkbLayout" "tr"

exit

umount -R /mnt/boot
umount -R /mnt

cryptsetup luksClose /dev/sda2 luks

systemctl reboot

useradd -m -g users -G wheel -s /bin/bash ceyhan
passwd ceyhan
ln -s /etc/fonts/conf.avail/70-no-bitmaps.conf /etc/fonts/conf.d/
