# Load Turkish Keys
  loadkeys trq
  
# Select Editor
  export EDITOR=nano

# Connect Internet
  wifi-menu

# Partitioning the Hard Drive
  cfdisk /dev/sda
  /dev/sda1 -- Boot Partition = 500MB 
  /dev/sda2 -- Default Partition = 100%

  mkfs.fat -F32 /dev/sda1
  cryptsetup luksFormat /dev/sda2
  cryptsetup luksOpen /dev/sda2 luks
  pvcreate /dev/mapper/luks
  vgcreate vg0 /dev/mapper/luks
  lvcreate -L 2G vg0 --name swap
  lvcreate -l 100%FREE vg0 --name root
  mkfs.ext4 /dev/vg0/root
  mkswap /dev/vg0/swap
  
  mount /dev/vg0/root /mnt
  swapon /dev/vg0/swap
  mkdir /mnt/boot
  mount /dev/sda1 /mnt/boot

# Installing basic software packages
  pacstrap /mnt base base-devel grub efibootmgr dialog wpa_supplicant acpid xorg xorg-drivers mesa rxvt-unicode pulseaudio i3-wm i3lock i3status dmenu
  
  genfstab -U /mnt >> /mnt/etc/fstab
  nano /mnt/etc/fstab
  
  Change relatime to noatime on the root partition to reduce SSD wear.

  Add tmpfs /tmp tmpfs rw,noatime,nodev,nosuid 0 0 if you want to keep /tmp in RAM.

# Chroot
  arch-chroot /mnt
  
# Setting the System Clock
  timedatectl set-timezone Europe/Istanbul
  timedatectl set-ntp true
  hwclock --systohc
  
# Locale
  nano /etc/locale.gen
  -- en_US.UTF-8 UTF-8
  -- en_US ISO-8859-1
  locale-gen
  
# Hostname
  echo archlinux > /etc/hostname 

# HOOKS
  Edit /etc/mkinitcpio.conf to add encrypt and lvm2 to HOOKS before filesystems. 
  Also add resume after filesystems to support resuming from hibernation.
  
  HOOKS=(base udev autodetect modconf block encrypt lvm2 filesystems resume keyboard fsck)
  
  mkinitcpio -p linux
  
# Root Password
  passwd
  
# Grub
  nano /etc/default/grub
  GRUB_ENABLE_CRYPTODISK=y
  GRUB_CMDLINE_LINUX="cryptdevice=/dev/sda2:luks:allow-discards resume=/dev/vg0/swap"
  
  grub-install --efi-directory=/boot
  grub-mkconfig -o /boot/grub/grub.cfg
  
  exit
  
  umount -R /mnt
  swapoff -a
  reboot
  
# Login
  
  localectl set-keymap --no-convert trq
  localectl set-x11-keymap tr
  
  systemctl enable acpid.service
  
  pacman -S firefox pcmanfm gimp inkscape scrot geany blender faenza-icon-theme ttf-fira-sans ttf-fira-mono ttf-fira-code ttf-droid ttf-font-awesome ttf-roboto ttf-opensans ttf-ubuntu-font-family ttf-anonymous-pro ttf-linux-libertine ttf-liberation ttf-lato ttf-dejavu ttf-bitstream-vera mplayer acpi gtk-engines elementary-icon-theme materia-gtk-theme arc-gtk-theme arc-icon-theme gtk-engine-murrine
 
